[[plugins]]
repo = 'Shougo/ddu.vim'
depends = 'denops.vim'
hook_add = '''
nmap <silent> <C-e>
\   <Cmd>call ddu#start({
\       'name': 'filer',
\       'searchPath': expand('%:p'),
\   })<CR>
'''
hook_source = '''
call ddu#custom#patch_local('filer', {
\   'ui': 'filer',
\   'sources': [
\       {
\           'name': 'file',
\           'params': {},
\       }
\   ],
\   'sourceOptions': {
\       '_': {
\           'columns': ['filename'],
\       },
\   },
\   'kindOptions': {
\       'file': {
\           'defaultAction': 'open',
\       },
\   },
\   'uiParams': {
\       'filer': {
\           'winWidth': 40,
\           'split': 'floating',
\           'splitDirection': 'topleft',
\       },
\   },
\})
autocmd TabEnter,CursorHold,FocusGained <buffer>
\   call ddu#ui#filer#do_action('checkItem')
autocmd FileType ddu-filer call s:ddu_filer_settings()
function! s:ddu_filer_settings() abort
    nnoremap <buffer><silent> <Esc>
\       <Cmd>call ddu#ui#filer#do_action('quit')<CR>
    nnoremap <buffer><expr> <CR>
\       ddu#ui#get_item()->get('isTree', v:false) ?
\       "<Cmd>call ddu#ui#do_action('itemAction', {
\           'name': 'narrow',
\       })<CR>"
\       : "<Cmd>call ddu#ui#do_action('itemAction', {
\           'name': 'open'
\       })<CR>"
    nnoremap <buffer><silent> <BS>
\       <Cmd>call ddu#ui#filer#do_action('itemAction', {
\           'name': 'narrow',
\           'params': {
\               'path': '..',
\           },
\       })<CR>
    nnoremap <buffer><silent> t
\       <Cmd>call ddu#ui#filer#do_action('itemAction' {
\           'name': 'newFile',
\       })<CR>
    nnoremap <buffer><silent> mk
\       <Cmd>call ddu#ui#filer#do_action('itemAction' {
\           'name': 'newDirectory',
\       })<CR>
endfunction
'''

[[plugins]]
repo = 'Shougo/ddu-ui-filer'
on_source = ['denops.vim', 'ddu.vim']

[[plugins]]
repo = 'Shougo/ddu-source-file'
on_source = ['denops.vim', 'ddu.vim']

[[plugins]]
repo = 'Shougo/ddu-kind-file'
on_source = ['denops.vim', 'ddu.vim']

[[plugins]]
repo = 'Shougo/ddu-column-filename'
on_source = ['denops.vim', 'ddu.vim']

[[plugins]]
repo = 'Shougo/deol.nvim'
on_source = ['ddu.vim']

hook_add = '''
nmap <leader>sh <Cmd>call deol#start({
\   'split': "otherwise",
\})<CR>
tnoremap <C-[> <C-\><C-n>

autocmd FileType deol call s:deol_settings()
function! s:deol_settings() abort
    nnoremap <buffer> <C-n> <Plug>(deol_next_prompt)
    nnoremap <buffer> <C-p> <Plug>(deol_previous_prompt)
    nnoremap <buffer> <CR> <Plug>(deol_execute_line)
    nnoremap <buffer> A <Plug>(deol_start_append_last)
    nnoremap <buffer> I <Plug>(deol_start_insert_first)
    nnoremap <buffer> a <Plug>(deol_start_append)
    nnoremap <buffer> i <Plug>(deol_start_insert)
    nnoremap <buffer> e <Plug>(deol_edit)
    nnoremap <buffer> q <Plug>(deol_quit)
endfunction

autocmd BufEnter deol-edit@default call s:deol_edit_settings()
function! s:deol_edit_settings() abort
    nnoremap <buffer> <CR> <Plug>(deol_execute_line)
    nnoremap <buffer> q <Plug>(deol_quit)
    inoremap <buffer> <CR> <Plug>(deol_execute_line)
endfunction
'''
